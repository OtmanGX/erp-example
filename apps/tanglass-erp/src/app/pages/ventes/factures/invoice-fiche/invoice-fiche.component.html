<nb-card>
    <nb-card-header>
        <div class="row justify-content-between label">
            <div class="col-4">
                Bon de livraison
            </div>
        </div>
    </nb-card-header>
    <nb-card-body>
        <form [formGroup]="invoiceForm">
            <div class="row">
                <div class="col-8">

                </div>


            </div>

            <div class="row">
                <div class="col-4">


                    <div class="form-group row">
                        <label class="col-sm-4 col-form-label">Date </label>
                        <nb-form-field class="col-sm-8">
                            <nb-icon nbSuffix icon="calendar-outline" pack="eva"></nb-icon>
                            <input nbInput [nbDatepicker]="date" formControlName="date" fullWidth fieldSize="tiny" />
                            <nb-datepicker #date></nb-datepicker>
                        </nb-form-field>
                    </div>
                </div>

                <div class="col-4">
                    <div class="form-group row">
                        <label class="col-sm-4 col-form-label">Société</label>
                        <nb-form-field class="col-sm-8">
                            <nb-select size="tiny" fullWidth formControlName="companie" (selectedChange)="onChoosingCompanie($event)">
                                <nb-option *ngFor="let option of companiesOptions " [value]="option">
                                    {{option}}
                                </nb-option>
                            </nb-select>
                        </nb-form-field>
                    </div>
                    <div class="form-group row">
                        <label class="col-sm-4 col-form-label">Paiement</label>
                        <nb-form-field class="col-sm-8">
                            <nb-select size="tiny" fullWidth formControlName="paiementMode">
                                <nb-option *ngFor="let option of paiementModes " [value]="option">
                                    {{option}}
                                </nb-option>

                            </nb-select>
                        </nb-form-field>
                    </div>
                </div>

                <div class="col-4">
                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Client</label>
                        <ng-multiselect-dropdown (onSelect)="onSelectClient($event)" placeholder="" class="col-sm-8" [settings]="dropdownSettings" [data]="listClients">
                        </ng-multiselect-dropdown>
                    </div>

                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Contact</label>
                        <ng-multiselect-dropdown formControlName="contact" placeholder="" class="col-sm-8" [settings]="dropdownSettings" [data]="listContacts">
                        </ng-multiselect-dropdown>
                    </div>

                </div>
            </div>
        </form>

        <div>
            <div class="col-form-label">
                Bons de livraison
            </div>
            <div class="row justify-content-between">
                <table class="table" cdkDropList #todoList="cdkDropList" [cdkDropListData]="listFilteredDeliveries" [cdkDropListConnectedTo]="[doneList]" (cdkDropListDropped)="onDrop($event)">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">N° B.L</th>
                            <th scope="col">Montant HT</th>
                            <th scope="col">TVA</th>
                            <th scope="col">Montant TTC</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let element of listFilteredDeliveries" cdkDrag>

                            <td>{{ element.id }}</td>
                            <td>{{ element.total_HT }}</td>
                            <td>{{ element.tva }}</td>
                            <td>{{ element.total_TTC }}</td>
                        </tr>
                    </tbody>
                </table>
                <table class="table" cdkDropList #doneList="cdkDropList" [cdkDropListData]="done" [cdkDropListConnectedTo]="[todoList]" (cdkDropListDropped)="onDrop($event)">
                    <thead>
                        <tr>
                            <th scope="col">#</th>
                            <th scope="col">N° B.L</th>
                            <th scope="col">Montant HT</th>
                            <th scope="col">TVA</th>
                            <th scope="col">Montant TTC</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let element of done" cdkDrag>
                            <td>{{ element.id }}</td>
                            <td>{{ element.total_HT }}</td>
                            <td>{{ element.tva }}</td>
                            <td>{{ element.total_TTC }}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="row justify-content-end col-form-label">
            <nb-card class="col-4 price">
                <nb-card-body>
                    <div class="row">
                        <div class="col-6">Total HT:</div>
                        <div class="col-5"> DH</div>
                        <div class="col-6">TVA 20%:</div>
                        <div class="col-5"> DH</div>
                    </div>
                </nb-card-body>
                <nb-card-footer class="row">
                    <div class="col-6">Total TTC:</div>
                    <div class="col-6"> DH</div>
                </nb-card-footer>
            </nb-card>
        </div>
    </nb-card-body>
    <nb-card-footer class="row justify-content-center">

        <button (click)="confirm()" class="col-2" shape="rectangle" nbButton hero status="primary" size="tiny" fullWidth>
    <nb-icon

    class="icon"
    nbTooltip="nouveau"
    nbTooltipPlacement="top"
    icon="checkmark-circle-2-outline"
    pack="eva"
  ></nb-icon>Confirmer</button>

        <button class="col-2" nbButton shape="rectangle" status="danger" size="tiny" fullWidth>
    <nb-icon

    class="icon"
    nbTooltip="nouveau"
    nbTooltipPlacement="top"
    icon="close-circle-outline"
    pack="eva"
  ></nb-icon>Annuler</button>
    </nb-card-footer>
</nb-card>